--- ckeditor.inc	Sat Nov 05 03:59:33 2011
+++ ckeditor.inc	Tue Nov 08 09:36:01 2011
@@ -180,6 +180,14 @@
     }
   }
 
+  // Get additional styles, supported in ckeditor versions 3.2.1 and above.
+  if (!empty($config['css_classes'])) {
+    $styles = wysiwyg_ckeditor_get_styles_set($config['css_classes']);
+    if (!empty($styles)) {
+      $settings['stylesSet'] = $styles;
+    }
+  }
+
   if (isset($config['language'])) {
     $settings['language'] = $config['language'];
   }
@@ -331,3 +339,37 @@
   return $plugins;
 }
 
+/**
+ * Converts the CSS classes string to an array of js settings.
+ *
+ * The CSS classes are edited in element CSS Classes, fieldset CSS
+ * of page admin/config/content/wysiwyg/profile/{filter}/edit.
+ *
+ * Note: only checking for correct format of each line. No error
+ * logging/hinting, as that should be done on the settings form.
+ *
+ * @param string $css_classes
+ *   A list of classes to add to the style drop down.
+ * @return array
+ */
+function wysiwyg_ckeditor_get_styles_set($css_classes) {
+  $css_styles = array();
+  $lines = explode("\n", $css_classes);
+  foreach ($lines as $line) {
+    if (!empty($line)) {
+      $l = explode('=', $line);
+      if (count($l) === 2) {
+        $lc = explode('.', $l[1]);
+        if (count($lc) === 2) {
+          $style['name'] = trim($l[0]);
+          $style['element'] = trim($lc[0]);
+          $style['attributes']['class'] = trim($lc[1]);
+          if (!empty($style['name']) && !empty($style['element']) && !empty($style['attributes']['class'])) {
+            $css_styles[] = $style;
+          }
+        }
+      }
+    }
+  }
+  return $css_styles;
+}
